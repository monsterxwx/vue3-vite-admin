import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";import{a2 as B,r as x,B as o,g as h,aE as C,ab as j,c as p,e as y,k as b,G as v,Y as E,ac as $,f as k,n as R,D as V,w as A,q}from"./index-3b78b159.js";const z=i=>typeof i=="number",Y=i=>typeof i=="string";const F={__name:"virtual-list",props:{className:{type:String,default:""},style:{type:[Object,String,Array]},height:{type:Number,default:500},width:{type:[Number,String],default:"100%"},itemHeight:{type:Number,default:30},dynamic:{type:Boolean,default:!1},cache:{type:Number,default:2},data:{type:Array,default:()=>[]}},setup(i){const s=i,t=B({start:0,end:Math.ceil(s.height/s.itemHeight),scrollOffset:0,cacheData:[]}),m=x(),f=o(()=>{const{style:e,height:a,width:r}=s,n=Y(e)?JSON.parse(e):{...e};return{height:`${a}px`,width:z(r)?`${r}px`:r,...n}}),_=o(()=>({height:`${h(S)}px`,width:"100%"})),O=o(()=>({willChange:"transform",transform:`translateY(${t.scrollOffset}px)`})),g=o(()=>s.data.length),S=o(()=>s.dynamic?d(h(g)):h(g)*s.itemHeight),D=o(()=>Math.ceil(s.height/s.itemHeight)),w=o(()=>s.data.slice(t.start,t.end)),H=e=>{const{scrollTop:a}=e.target;if(t.scrollOffset===a)return;const{cache:r,dynamic:n,itemHeight:c}=s,l=Math.max(1,r);let u=n?M(a):Math.floor(a/c);const N=Math.max(0,Math.min(h(g),u+h(D)+l));u>l&&(u=u-l);const L=n?d(u):a-a%c;Object.assign(t,{start:u,end:N,scrollOffset:L})},M=(e=0)=>{let a=0,r=t.cacheData.length-1;for(;a<=r;){const n=a+Math.floor((r-a)/2),c=d(n),l=d(n+1);if(c<=e&&e<=l)return n;l<e?a=n+1:l>e&&(r=n-1)}return Math.min(h(g)-h(D),Math.floor(e/s.itemHeight))},d=e=>{const a=t.cacheData.length-1;return Object.hasOwn(t.cacheData,e)?t.cacheData[e].top:Object.hasOwn(t.cacheData,e-1)?t.cacheData[e-1].bottom:e>a?t.cacheData[a].bottom+Math.max(0,e-t.cacheData[a].index)*s.itemHeight:e*s.itemHeight};return C(()=>{if(!s.dynamic)return;[...m.value.children||[]].forEach((a,r)=>{const n=a.getBoundingClientRect().height,c=t.start+r;t.cacheData[c].height!==n&&(t.cacheData[c].height=n,t.cacheData[c].top=d(c),t.cacheData[c].bottom=t.cacheData[c].top+t.cacheData[c].height)})}),j(()=>{w.value.forEach((e,a)=>{const r=t.start+a;Object.hasOwn(t.cacheData,r)||(t.cacheData[r]={top:r*s.itemHeight,height:s.itemHeight,bottom:(r+1)*s.itemHeight,index:r})})}),(e,a)=>(p(),y("div",{class:R(["base-virtual-wrapper",i.className]),ref:"wrapperRef",style:v(f.value),onScroll:H},[b("div",{class:"base-virtual-inner",ref:"innerRef",style:v(_.value)},[b("div",{class:"base-virtual-list",style:v(O.value),ref_key:"virtualListRef",ref:m},[(p(!0),y(E,null,$(w.value,(r,n)=>(p(),y("div",{key:n+t.start},[k(e.$slots,"default",{item:r},void 0,!0)]))),128))],4)],4)],38))}},G=I(F,[["__scopeId","data-v-65c71a12"]]),J={class:"w-full h-full"},U={class:"p-10px"},P={__name:"index",setup(i){const s=["永和九年，岁在癸丑，暮春之初，会于会稽山阴之兰亭，修禊事也。群贤毕至，少长咸集。此地有崇山峻岭，茂林修竹，又有清流激湍，映带左右，引以为流觞曲水，列坐其次。虽无丝竹管弦之盛，一觞一咏，亦足以畅叙幽情。是日也，天朗气清，惠风和畅。仰观宇宙之大，俯察品类之盛，所以游目骋怀，足以极视听之娱，信可乐也。夫人之相与，俯仰一世。或取诸怀抱，悟言一室之内；或因寄所托，放浪形骸之外。虽趣舍万殊，静躁不同，当其欣于所遇，暂得于己，快然自足，不知老之将至；及其所之既倦，情随事迁，感慨系之矣。向之所欣，俯仰之间，已为陈迹，犹不能不以之兴怀，况修短随化，终期于尽！古人云：“死生亦大矣。”岂不痛哉！每览昔人兴感之由，若合一契，未尝不临文嗟悼，不能喻之于怀。固知一死生为虚诞，齐彭殇为妄作。后之视今，亦犹今之视昔，悲夫！故列叙时人，录其所述，虽世殊事异，所以兴怀，其致一也。后之览者，亦将有感于斯文。","和九年，岁在癸丑，暮春之初，会于会稽山阴之兰亭，修禊事也。群贤毕至，少长咸集。此地有崇山峻岭，茂林修竹，又有清流激湍，映带左右，引以为流觞曲水，列坐其次。虽无丝竹管弦之盛，一觞一咏，亦足以畅叙幽情。是日也，天朗气清，惠风和畅。仰观宇宙之大，俯察品类之盛，所以游目骋怀","所以游目骋怀，足以极视听之娱，信可乐也。夫人之相与，俯仰一世。或取诸怀抱，悟言一室之内；或因寄所托，放浪形骸之外。虽趣舍万殊，静躁不同，当其欣于所遇，暂得于己，快然自足，不知老之将至；及其所之既倦，情随事迁，感慨系之矣。向之所欣，俯仰之间，已为陈迹，犹不能不以之兴怀，况修短随化，终期于尽！古人云：“死生亦大矣。”岂不痛哉！每览昔人兴感之由，若合一契，未尝不临文嗟悼，不能喻之于怀。固知一死生为虚诞，齐彭殇为妄作。后之视今，亦犹今之视昔，悲夫！故列叙时人，录其所述，虽世殊事异，所以兴怀，其致一也。后之览者，亦将有感于斯文","快然自足，不知老之将至；及其所之既倦，情随事迁，感慨系之矣。向之所欣，俯仰之间，已为陈迹，犹不能不以之兴怀，况修短随化","引以为流觞曲水，列坐其次。虽无丝竹管弦之盛，一觞一咏，亦足以畅叙幽情。是日也，天朗气清，惠风和畅。仰观宇宙之大，俯察品类之盛，所以游目骋怀，足以极视听之娱，信可乐也。夫人之相与，俯仰一世。或取诸怀抱，悟言一室之内；或因寄所托，放浪形骸之外。虽趣舍万殊，静躁不同，当其欣于所遇，暂得于己，快然自足，不知老之将至；及其所之既倦，情随事迁，感慨系之矣。向之所欣，俯仰之间，已为陈迹，犹不能"],t=x(Array.from({length:1e3}).map((m,f)=>({name:f+1+"."+s[f%5]})));return console.log(t.value),(m,f)=>(p(),y("div",J,[V(G,{data:t.value,"item-height":50,class:"bg-#fff"},{default:A(({item:_})=>[b("div",U,q(_.name),1)]),_:1},8,["data"])]))}};export{P as default};
