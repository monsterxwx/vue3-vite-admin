import{ar as Y,B as K,g as p,ak as j,r as R,aB as G,o as U,i as k,L as B,M as $,_ as q,d as z,p as Q,P as b,f as X,S as D,a6 as Z}from"./index-3b78b159.js";function ee(e){return e==null}class te extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function ve(e,t){throw new te(`[${e}] ${t}`)}function Te(e,t){}const ge="update:modelValue",be="change",ye="input";var ne={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const ae=e=>(t,a)=>oe(t,a,p(e)),oe=(e,t,a)=>G(a,e,e).replace(/\{(\w+)\}/g,(o,r)=>{var c;return`${(c=t==null?void 0:t[r])!=null?c:`{${r}}`}`}),se=e=>{const t=K(()=>p(e).name),a=j(e)?e:R(e);return{lang:t,locale:a,t:ae(e)}},Fe=()=>{const e=Y("locale");return se(K(()=>e.value||ne))};let f=[];const re=e=>{const t=a=>{const o=a;o.key===$.esc&&f.forEach(r=>r(o))};U(()=>{f.length===0&&document.addEventListener("keydown",t),k&&f.push(e)}),B(()=>{f=f.filter(a=>a!==e),f.length===0&&k&&document.removeEventListener("keydown",t)})},H=e=>{const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0||o===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t},P=(e,t)=>{for(const a of e)if(!ce(a,t))return a},ce=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},ie=e=>{const t=H(e),a=P(t,e),o=P(t.reverse(),e);return[a,o]},ue=e=>e instanceof HTMLInputElement&&"select"in e,d=(e,t)=>{if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&ue(e)&&t&&e.select()}};function O(e,t){const a=[...e],o=e.indexOf(t);return o!==-1&&a.splice(o,1),a}const le=()=>{let e=[];return{push:o=>{const r=e[0];r&&o!==r&&r.pause(),e=O(e,o),e.unshift(o)},remove:o=>{var r,c;e=O(e,o),(c=(r=e[0])==null?void 0:r.resume)==null||c.call(r)}}},de=(e,t=!1)=>{const a=document.activeElement;for(const o of e)if(d(o,t),document.activeElement!==a)return},A=le(),y="focus-trap.focus-after-trapped",F="focus-trap.focus-after-released",x={cancelable:!0,bubbles:!1},I="focusAfterTrapped",M="focusAfterReleased",fe=Symbol("elFocusTrap"),pe=z({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[I,M,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const a=R();let o,r;re(n=>{e.trapped&&!c.paused&&t("release-requested",n)});const c={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},m=n=>{if(!e.loop&&!e.trapped||c.paused)return;const{key:s,altKey:i,ctrlKey:u,metaKey:l,currentTarget:J,shiftKey:w}=n,{loop:L}=e,W=s===$.tab&&!i&&!u&&!l,E=document.activeElement;if(W&&E){const v=J,[T,g]=ie(v);T&&g?!w&&E===g?(n.preventDefault(),L&&d(T,!0),t("focusout-prevented")):w&&[T,v].includes(E)&&(n.preventDefault(),L&&d(g,!0),t("focusout-prevented")):E===v&&(n.preventDefault(),t("focusout-prevented"))}};Q(fe,{focusTrapRef:a,onKeydown:m}),b(()=>e.focusTrapEl,n=>{n&&(a.value=n)},{immediate:!0}),b([a],([n],[s])=>{n&&(n.addEventListener("keydown",m),n.addEventListener("focusin",S),n.addEventListener("focusout",_)),s&&(s.removeEventListener("keydown",m),s.removeEventListener("focusin",S),s.removeEventListener("focusout",_))});const h=n=>{t(I,n)},V=n=>t(M,n),S=n=>{const s=p(a);if(!s)return;const i=n.target,u=i&&s.contains(i);u&&t("focusin",n),!c.paused&&e.trapped&&(u?r=i:d(r,!0))},_=n=>{const s=p(a);if(!(c.paused||!s))if(e.trapped){const i=n.relatedTarget;!ee(i)&&!s.contains(i)&&setTimeout(()=>{!c.paused&&e.trapped&&d(r,!0)},0)}else{const i=n.target;i&&s.contains(i)||t("focusout",n)}};async function C(){await D();const n=p(a);if(n){A.push(c);const s=document.activeElement;if(o=s,!n.contains(s)){const u=new Event(y,x);n.addEventListener(y,h),n.dispatchEvent(u),u.defaultPrevented||D(()=>{let l=e.focusStartEl;Z(l)||(d(l),document.activeElement!==l&&(l="first")),l==="first"&&de(H(n),!0),(document.activeElement===s||l==="container")&&d(n)})}}}function N(){const n=p(a);if(n){n.removeEventListener(y,h);const s=new Event(F,x);n.addEventListener(F,V),n.dispatchEvent(s),s.defaultPrevented||d(o??document.body,!0),n.removeEventListener(F,h),A.remove(c)}}return U(()=>{e.trapped&&C(),b(()=>e.trapped,n=>{n?C():N()})}),B(()=>{e.trapped&&N()}),{onKeydown:m}}});function me(e,t,a,o,r,c){return X(e.$slots,"default",{handleKeydown:e.onKeydown})}var Se=q(pe,[["render",me],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);export{be as C,Se as E,fe as F,ye as I,ge as U,Te as d,ee as i,ve as t,Fe as u};
