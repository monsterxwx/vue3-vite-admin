import{aj as q,ak as W,i as R,a0 as B,P as A,al as I,Z,am as j,$ as P,an as b,b as O,h as M,d as X,u as J,D as Q,f as x,a3 as F,a as ee,ao as oe,ap as te,r as m,B as k,aq as ne,ar as le,as as se,S as ae,o as ue,s as de,a4 as L}from"./index-edc45f6d.js";import{t as ie,U as _}from"./focus-trap2-543b46e6.js";import{a as w}from"./el-button-f6c94aba.js";import{g as re}from"./scroll2-75959fdf.js";const be=(...e)=>o=>{e.forEach(t=>{q(t)?t(o):t.value=o})};var p=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(p||{});const ce=e=>{if(W(e)||ie("[useLockscreen]","You need to pass a ref param to this function"),!R||B(document.body,"el-popup-parent--hidden"))return;let o=0,t=!1,n="0",u=0;const d=()=>{P(document.body,"el-popup-parent--hidden"),t&&(document.body.style.paddingRight=n)};A(e,l=>{if(!l){d();return}t=!B(document.body,"el-popup-parent--hidden"),t&&(n=document.body.style.paddingRight,u=Number.parseInt(I(document.body,"paddingRight"),10)),o=re();const i=document.documentElement.clientHeight<document.body.scrollHeight,s=I(document.body,"overflowY");o>0&&(i||s==="scroll")&&t&&(document.body.style.paddingRight=`${u+o}px`),Z(document.body,"el-popup-parent--hidden")}),j(()=>d())},fe=e=>{if(!e)return{onClick:b,onMousedown:b,onMouseup:b};let o=!1,t=!1;return{onClick:l=>{o&&t&&e(l),o=t=!1},onMousedown:l=>{o=l.target===l.currentTarget},onMouseup:l=>{t=l.target===l.currentTarget}}},ye=O({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:M([String,Array,Object])},zIndex:{type:M([String,Number])}}),me={click:e=>e instanceof MouseEvent};var pe=X({name:"ElOverlay",props:ye,emits:me,setup(e,{slots:o,emit:t}){const n=J("overlay"),u=s=>{t("click",s)},{onClick:d,onMousedown:l,onMouseup:i}=fe(e.customMaskEvent?void 0:u);return()=>e.mask?Q("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:l,onMouseup:i},[x(o,"default")],p.STYLE|p.CLASS|p.PROPS,["onClick","onMouseup","onMousedown"]):F("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const Ae=pe,ve=O({center:{type:Boolean,default:!1},closeIcon:{type:ee,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Me={close:()=>!0},Oe=O({...ve,appendToBody:{type:Boolean,default:!1},beforeClose:{type:M(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Ne={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[_]:e=>oe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},De=(e,o)=>{const n=de().emit,{nextZIndex:u}=te();let d="";const l=w(),i=w(),s=m(!1),v=m(!1),f=m(!1),E=m(e.zIndex||u());let r,c;const Y=k(()=>ne(e.width)?`${e.width}px`:e.width),g=le("namespace",se),z=k(()=>{const a={},y=`--${g.value}-dialog`;return e.fullscreen||(e.top&&(a[`${y}-margin-top`]=e.top),e.width&&(a[`${y}-width`]=Y.value)),a});function H(){n("opened")}function h(){n("closed"),n(_,!1),e.destroyOnClose&&(f.value=!1)}function G(){n("close")}function N(){c==null||c(),r==null||r(),e.openDelay&&e.openDelay>0?{stop:r}=L(()=>D(),e.openDelay):D()}function C(){r==null||r(),c==null||c(),e.closeDelay&&e.closeDelay>0?{stop:c}=L(()=>S(),e.closeDelay):S()}function T(){function a(y){y||(v.value=!0,s.value=!1)}e.beforeClose?e.beforeClose(a):C()}function V(){e.closeOnClickModal&&T()}function D(){R&&(s.value=!0)}function S(){s.value=!1}function U(){n("openAutoFocus")}function $(){n("closeAutoFocus")}e.lockScroll&&ce(s);function K(){e.closeOnPressEscape&&T()}return A(()=>e.modelValue,a=>{a?(v.value=!1,N(),f.value=!0,n("open"),E.value=e.zIndex?E.value++:u(),ae(()=>{o.value&&(o.value.scrollTop=0)})):s.value&&C()}),A(()=>e.fullscreen,a=>{o.value&&(a?(d=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=d)}),ue(()=>{e.modelValue&&(s.value=!0,f.value=!0,N())}),{afterEnter:H,afterLeave:h,beforeLeave:G,handleClose:T,onModalClick:V,close:C,doClose:S,onOpenAutoFocus:U,onCloseAutoFocus:$,onCloseRequested:K,titleId:l,bodyId:i,closed:v,style:z,rendered:f,visible:s,zIndex:E}};export{Ae as E,Ne as a,ve as b,be as c,Oe as d,Me as e,fe as f,De as u};
