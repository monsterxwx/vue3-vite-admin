import{aw as k,b as N,h as _,d as ie,a as q,I as re,f as W,a9 as ce,i as de,ax as fe,ay as ve,a5 as ye,A as d,C as S,a4 as me,a2 as ge,az as be,aA as Ce,a3 as pe,aB as he,r as E,aC as Ee,aD as Se,G as _e,ag as we,al as xe,V as Be,o as Oe,q as Ie,aj as Ae,aE as Y,ab as G,aF as Te}from"./index-1e909678.js";import{P as L,g as Me}from"./vnode-82c36526.js";import{b as Pe,U as H}from"./index-9cc368fe.js";import{a as K}from"./el-button-03912722.js";const ke=e=>{if(!e)return{onClick:k,onMousedown:k,onMouseup:k};let t=!1,s=!1;return{onClick:a=>{t&&s&&e(a),t=s=!1},onMousedown:a=>{t=a.target===a.currentTarget},onMouseup:a=>{s=a.target===a.currentTarget}}},Le=N({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:_([String,Array,Object])},zIndex:{type:_([String,Number])}}),De={click:e=>e instanceof MouseEvent},Ne="overlay";var Fe=ie({name:"ElOverlay",props:Le,emits:De,setup(e,{slots:t,emit:s}){const f=q(Ne),l=y=>{s("click",y)},{onClick:u,onMousedown:a,onMouseup:v}=ke(e.customMaskEvent?void 0:l);return()=>e.mask?re("div",{class:[f.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:a,onMouseup:v},[W(t,"default")],L.STYLE|L.CLASS|L.PROPS,["onClick","onMouseup","onMousedown"]):ce("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[W(t,"default")])}});const Ge=Fe,Ke=Symbol("dialogInjectionKey"),D="dialog-fade",ze=N({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:de},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),qe={close:()=>!0},He=(...e)=>t=>{e.forEach(s=>{s.value=t})},Ze=N({...ze,appendToBody:Boolean,appendTo:{type:Pe.to.type,default:"body"},beforeClose:{type:_(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:_([String,Object]),default:void 0}}),Je={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[H]:e=>fe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},je=(e,t={})=>{ve(e)||ye("[useLockscreen]","You need to pass a ref param to this function");const s=t.ns||q("popup"),f=d(()=>s.bm("parent","hidden"));let l=0,u=!1,a="0";const v=()=>{setTimeout(()=>{typeof document>"u"||u&&document&&(document.body.style.width=a,pe(document.body,f.value))},200)};S(e,y=>{if(!y){v();return}u=!me(document.body,f.value),u&&(a=document.body.style.width,ge(document.body,f.value)),l=Me(s.namespace.value);const r=document.documentElement.clientHeight<document.body.scrollHeight,m=be(document.body,"overflowY");l>0&&(r||m==="scroll")&&u&&(document.body.style.width=`calc(100% - ${l}px)`)}),Ce(()=>v())},Ve="ElDialog",Qe=(e,t)=>{var s;const l=Ie().emit,{nextZIndex:u}=he();let a="";const v=K(),y=K(),r=E(!1),m=E(!1),C=E(!1),w=E((s=e.zIndex)!=null?s:u());let g,b;const F=Ee(),Z=d(()=>{var o,n;return(n=(o=F.value)==null?void 0:o.namespace)!=null?n:Se}),p=d(()=>{var o;return(o=F.value)==null?void 0:o.dialog}),J=d(()=>{const o={},n=`--${Z.value}-dialog`;return e.fullscreen||(e.top&&(o[`${n}-margin-top`]=e.top),e.width&&(o[`${n}-width`]=_e(e.width))),o}),Q=d(()=>{var o,n,i;return((i=(n=e.draggable)!=null?n:(o=p.value)==null?void 0:o.draggable)!=null?i:!1)&&!e.fullscreen}),z=d(()=>{var o,n,i;return(i=(n=e.alignCenter)!=null?n:(o=p.value)==null?void 0:o.alignCenter)!=null?i:!1}),X=d(()=>{var o,n,i;return(i=(n=e.overflow)!=null?n:(o=p.value)==null?void 0:o.overflow)!=null?i:!1}),R=d(()=>z.value?{display:"flex"}:{}),ee=d(()=>{var o,n,i;const M=(i=(n=e.transition)!=null?n:(o=p.value)==null?void 0:o.transition)!=null?i:D,se={name:M,onAfterEnter:x,onBeforeLeave:O,onAfterLeave:B};if(we(M)){const c={...M},P=(h,ue)=>$=>{Ae(h)?h.forEach(U=>{Y(U)&&U($)}):Y(h)&&h($),ue()};return c.onAfterEnter=P(c.onAfterEnter,x),c.onBeforeLeave=P(c.onBeforeLeave,O),c.onAfterLeave=P(c.onAfterLeave,B),c.name||(c.name=D,xe(Ve,`transition.name is missing when using object syntax, fallback to '${D}'`)),c}return se});function x(){l("opened")}function B(){l("closed"),l(H,!1),e.destroyOnClose&&(C.value=!1)}function O(){l("close")}function j(){b==null||b(),g==null||g(),e.openDelay&&e.openDelay>0?{stop:g}=G(()=>V(),e.openDelay):V()}function I(){g==null||g(),b==null||b(),e.closeDelay&&e.closeDelay>0?{stop:b}=G(()=>T(),e.closeDelay):T()}function A(){function o(n){n||(m.value=!0,r.value=!1)}e.beforeClose?e.beforeClose(o):I()}function oe(){e.closeOnClickModal&&A()}function V(){Te&&(r.value=!0)}function T(){r.value=!1}function ne(){l("openAutoFocus")}function te(){l("closeAutoFocus")}function ae(o){var n;((n=o.detail)==null?void 0:n.focusReason)==="pointer"&&o.preventDefault()}e.lockScroll&&je(r);function le(){e.closeOnPressEscape&&A()}return S(()=>e.zIndex,()=>{var o;w.value=(o=e.zIndex)!=null?o:u()}),S(()=>e.modelValue,o=>{var n;o?(m.value=!1,j(),C.value=!0,w.value=(n=e.zIndex)!=null?n:u(),Be(()=>{l("open"),t.value&&(t.value.parentElement.scrollTop=0,t.value.parentElement.scrollLeft=0,t.value.scrollTop=0)})):r.value&&I()}),S(()=>e.fullscreen,o=>{t.value&&(o?(a=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=a)}),Oe(()=>{e.modelValue&&(r.value=!0,C.value=!0,j())}),{afterEnter:x,afterLeave:B,beforeLeave:O,handleClose:A,onModalClick:oe,close:I,doClose:T,onOpenAutoFocus:ne,onCloseAutoFocus:te,onCloseRequested:le,onFocusoutPrevented:ae,titleId:v,bodyId:y,closed:m,style:J,overlayDialogStyle:R,rendered:C,visible:r,zIndex:w,transitionConfig:ee,_draggable:Q,_alignCenter:z,_overflow:X}};export{Ge as E,Je as a,ze as b,He as c,Ze as d,qe as e,Ke as f,ke as g,Qe as u};
